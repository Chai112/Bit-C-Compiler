test/4_scope.mc AST:
{
| {
| | type: VAR
| | {
| | | type: FUNC
| | | funcType: INT
| | | isPtr: 0
| | | isStatic: 0
| | | funcName: a
| | | 
| | | scope:
| | | {
| | | | {
| | | | | type: VAR
| | | | | varType: INT
| | | | | isPtr: 0
| | | | | isStatic: 0
| | | | | varName: b
| | | | },
| | | | {
| | | | | type: ASSIGN
| | | | | varName: b
| | | | | 
| | | | | exprsn:
| | | | | {
| | | | | | {
| | | | | | | type: BINARY
| | | | | | | stub: 1
| | | | | | | single: 0
| | | | | | | op (id): +
| | | | | | | 
| | | | | | | left:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: LIT
| | | | | | | | | type: INT
| | | | | | | | | val: 1
| | | | | | | | },
| | | | | | | },
| | | | | | | 
| | | | | | | right:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: LIT
| | | | | | | | | type: INT
| | | | | | | | | val: 1
| | | | | | | | },
| | | | | | | },
| | | | | | },
| | | | | },
| | | | },
| | | | {
| | | | | type: ASSIGN
| | | | | varName: b
| | | | | 
| | | | | exprsn:
| | | | | {
| | | | | | {
| | | | | | | type: LIT
| | | | | | | type: INT
| | | | | | | val: 2
| | | | | | },
| | | | | },
| | | | },
| | | | {
| | | | | type: COND
| | | | | exprsn:
| | | | | {
| | | | | | {
| | | | | | | type: BINARY
| | | | | | | stub: 1
| | | | | | | single: 0
| | | | | | | op (id): +
| | | | | | | 
| | | | | | | left:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: ID
| | | | | | | | | isPtr: 0
| | | | | | | | | varName: b
| | | | | | | | },
| | | | | | | },
| | | | | | | 
| | | | | | | right:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: LIT
| | | | | | | | | type: INT
| | | | | | | | | val: 5
| | | | | | | | },
| | | | | | | },
| | | | | | },
| | | | | },
| | | | | 
| | | | | scope:
| | | | | {
| | | | | | {
| | | | | | | type: ASSIGN
| | | | | | | varName: b
| | | | | | | 
| | | | | | | exprsn:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: LIT
| | | | | | | | | type: INT
| | | | | | | | | val: 5
| | | | | | | | },
| | | | | | | },
| | | | | | },
| | | | | },
| | | | },
| | | | {
| | | | | type: CTRL
| | | | | exprsn:
| | | | | {
| | | | | | {
| | | | | | | type: BINARY
| | | | | | | stub: 1
| | | | | | | single: 0
| | | | | | | op (id): +
| | | | | | | 
| | | | | | | left:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: ID
| | | | | | | | | isPtr: 0
| | | | | | | | | varName: b
| | | | | | | | },
| | | | | | | },
| | | | | | | 
| | | | | | | right:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: LIT
| | | | | | | | | type: INT
| | | | | | | | | val: 5
| | | | | | | | },
| | | | | | | },
| | | | | | },
| | | | | },
| | | | | 
| | | | | scope:
| | | | | {
| | | | | | {
| | | | | | | type: ASSIGN
| | | | | | | varName: b
| | | | | | | 
| | | | | | | exprsn:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: LIT
| | | | | | | | | type: INT
| | | | | | | | | val: 5
| | | | | | | | },
| | | | | | | },
| | | | | | },
| | | | | },
| | | | },
| | | | {
| | | | | type: RET
| | | | | exprsn:
| | | | | {
| | | | | | {
| | | | | | | type: BINARY
| | | | | | | stub: 1
| | | | | | | single: 0
| | | | | | | op (id): +
| | | | | | | 
| | | | | | | left:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: ID
| | | | | | | | | isPtr: 0
| | | | | | | | | varName: a
| | | | | | | | },
| | | | | | | },
| | | | | | | 
| | | | | | | right:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: ID
| | | | | | | | | isPtr: 0
| | | | | | | | | varName: h
| | | | | | | | },
| | | | | | | },
| | | | | | },
| | | | | },
| | | | },
| | | },
| | },
| | {
| | | type: FUNC
| | | funcType: BYTE
| | | isPtr: 0
| | | isStatic: 0
| | | funcName: c
| | | 
| | | parameters:
| | | {
| | | | {
| | | | | type: VAR
| | | | | varType: INT
| | | | | isPtr: 0
| | | | | isStatic: 0
| | | | | varName: ca
| | | | },
| | | },
| | },
| | {
| | | type: FUNC
| | | funcType: INT
| | | isPtr: 0
| | | isStatic: 0
| | | funcName: d
| | | 
| | | parameters:
| | | {
| | | | {
| | | | | type: VAR
| | | | | varType: INT
| | | | | isPtr: 0
| | | | | isStatic: 0
| | | | | varName: da
| | | | },
| | | | {
| | | | | type: VAR
| | | | | varType: BYTE
| | | | | isPtr: 0
| | | | | isStatic: 0
| | | | | varName: db
| | | | },
| | | },
| | },
| | {
| | | type: FUNC
| | | funcType: INT
| | | isPtr: 0
| | | isStatic: 0
| | | funcName: e
| | | 
| | | scope:
| | | {
| | | | {
| | | | | type: CALL
| | | | | funcName: a
| | | | },
| | | | {
| | | | | type: CALL
| | | | | funcName: c
| | | | | 
| | | | | args:
| | | | | {
| | | | | | {
| | | | | | | type: LIT
| | | | | | | type: INT
| | | | | | | val: 2
| | | | | | },
| | | | | },
| | | | },
| | | | {
| | | | | type: VAR
| | | | | varType: INT
| | | | | isPtr: 0
| | | | | isStatic: 0
| | | | | varName: b
| | | | },
| | | | {
| | | | | type: ASSIGN
| | | | | varName: b
| | | | | 
| | | | | exprsn:
| | | | | {
| | | | | | {
| | | | | | | type: LIT
| | | | | | | type: INT
| | | | | | | val: 0
| | | | | | },
| | | | | },
| | | | },
| | | | {
| | | | | type: CALL
| | | | | funcName: c
| | | | | 
| | | | | args:
| | | | | {
| | | | | | {
| | | | | | | type: ID
| | | | | | | isPtr: 0
| | | | | | | varName: b
| | | | | | },
| | | | | },
| | | | },
| | | | {
| | | | | type: CALL
| | | | | funcName: c
| | | | | 
| | | | | args:
| | | | | {
| | | | | | {
| | | | | | | type: BINARY
| | | | | | | stub: 0
| | | | | | | single: 0
| | | | | | | op (id): +
| | | | | | | 
| | | | | | | left:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: ID
| | | | | | | | | isPtr: 0
| | | | | | | | | varName: b
| | | | | | | | },
| | | | | | | },
| | | | | | | 
| | | | | | | right:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: BINARY
| | | | | | | | | stub: 1
| | | | | | | | | single: 0
| | | | | | | | | op (id): +
| | | | | | | | | 
| | | | | | | | | left:
| | | | | | | | | {
| | | | | | | | | | {
| | | | | | | | | | | type: LIT
| | | | | | | | | | | type: INT
| | | | | | | | | | | val: 2
| | | | | | | | | | },
| | | | | | | | | },
| | | | | | | | | 
| | | | | | | | | right:
| | | | | | | | | {
| | | | | | | | | | {
| | | | | | | | | | | type: LIT
| | | | | | | | | | | type: INT
| | | | | | | | | | | val: 3
| | | | | | | | | | },
| | | | | | | | | },
| | | | | | | | },
| | | | | | | },
| | | | | | },
| | | | | },
| | | | },
| | | | {
| | | | | type: CALL
| | | | | funcName: d
| | | | | 
| | | | | args:
| | | | | {
| | | | | | {
| | | | | | | type: BINARY
| | | | | | | stub: 0
| | | | | | | single: 0
| | | | | | | op (id): +
| | | | | | | 
| | | | | | | left:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: ID
| | | | | | | | | isPtr: 0
| | | | | | | | | varName: b
| | | | | | | | },
| | | | | | | },
| | | | | | | 
| | | | | | | right:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: BINARY
| | | | | | | | | stub: 1
| | | | | | | | | single: 0
| | | | | | | | | op (id): +
| | | | | | | | | 
| | | | | | | | | left:
| | | | | | | | | {
| | | | | | | | | | {
| | | | | | | | | | | type: LIT
| | | | | | | | | | | type: INT
| | | | | | | | | | | val: 2
| | | | | | | | | | },
| | | | | | | | | },
| | | | | | | | | 
| | | | | | | | | right:
| | | | | | | | | {
| | | | | | | | | | {
| | | | | | | | | | | type: LIT
| | | | | | | | | | | type: INT
| | | | | | | | | | | val: 3
| | | | | | | | | | },
| | | | | | | | | },
| | | | | | | | },
| | | | | | | },
| | | | | | },
| | | | | | {
| | | | | | | type: LIT
| | | | | | | type: INT
| | | | | | | val: 2
| | | | | | },
| | | | | },
| | | | },
| | | | {
| | | | | type: CALL
| | | | | funcName: d
| | | | | 
| | | | | args:
| | | | | {
| | | | | | {
| | | | | | | type: LIT
| | | | | | | type: INT
| | | | | | | val: 4
| | | | | | },
| | | | | | {
| | | | | | | type: CALL
| | | | | | | funcName: c
| | | | | | | 
| | | | | | | args:
| | | | | | | {
| | | | | | | | {
| | | | | | | | | type: LIT
| | | | | | | | | type: INT
| | | | | | | | | val: 5
| | | | | | | | },
| | | | | | | },
| | | | | | },
| | | | | },
| | | | },
| | | },
| | },
| },
},
